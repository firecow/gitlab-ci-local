/* ==========================================================================
   GitLab CI Local - Web UI Styles
   Source file for embedded.ts generation
   ========================================================================== */

/* ==========================================================================
   CSS Variables (Theme)
   ========================================================================== */

/* Default: Dark theme */
:root {
    --bg-color: #1a1a2e;
    --surface-color: #16213e;
    --text-color: #eee;
    --text-muted: #888;
    --accent-color: #f8c22fff;
    --success-color: #4caf50;
    --warning-color: #ff8800ff;
    --error-color: #f81515ff;
    --border-color: #2a2a4a;
    --hover-color: #1f2f4f;
    /* Log viewer colors */
    --log-bg: #0d1117;
    --log-text: #c9d1d9;
    --log-line-number: #484f58;
}

/* Light theme via system preference (when not manually overridden to dark) */
@media (prefers-color-scheme: light) {
    :root:not(.dark-theme) {
        --bg-color: #f5f5f5;
        --surface-color: #ffffff;
        --text-color: #1a1a1a;
        --text-muted: #666;
        --accent-color: #d4a017;
        --success-color: #2e7d32;
        --warning-color: #e65100;
        --error-color: #c62828;
        --border-color: #e0e0e0;
        --hover-color: #f0f0f0;
        --log-bg: #fafafa;
        --log-text: #24292f;
        --log-line-number: #8b949e;
    }
}

/* Force light theme via class (overrides system preference) */
:root.light-theme {
    --bg-color: #f5f5f5;
    --surface-color: #ffffff;
    --text-color: #1a1a1a;
    --text-muted: #666;
    --accent-color: #d4a017;
    --success-color: #2e7d32;
    --warning-color: #e65100;
    --error-color: #c62828;
    --border-color: #e0e0e0;
    --hover-color: #f0f0f0;
    --log-bg: #fafafa;
    --log-text: #24292f;
    --log-line-number: #8b949e;
}

/* Force dark theme via class (overrides system preference) */
:root.dark-theme {
    --bg-color: #1a1a2e;
    --surface-color: #16213e;
    --text-color: #eee;
    --text-muted: #888;
    --accent-color: #f8c22fff;
    --success-color: #4caf50;
    --warning-color: #ff8800ff;
    --error-color: #f81515ff;
    --border-color: #2a2a4a;
    --hover-color: #1f2f4f;
    --log-bg: #0d1117;
    --log-text: #c9d1d9;
    --log-line-number: #484f58;
}

/* ==========================================================================
   Base Styles & Reset
   ========================================================================== */
* { box-sizing: border-box; margin: 0; padding: 0; }
html { height: 100%; overflow: hidden; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    line-height: 1.5;
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* ==========================================================================
   Layout
   ========================================================================== */
.container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
.container.full-width { max-width: none; padding-right: 0; }

/* Header */
.app-header { background: var(--surface-color); border-bottom: 1px solid var(--border-color); padding: 1rem 0; flex-shrink: 0; }
.header-content { display: flex; justify-content: space-between; align-items: center; }
.app-title { font-size: 1.25rem; font-weight: 600; }
.logo { color: var(--text-color); text-decoration: none; }
.logo:hover { opacity: 0.8; }

/* Navigation */
.app-nav { display: flex; gap: 1rem; }
.nav-link { color: var(--text-muted); text-decoration: none; padding: 0.5rem 1rem; border-radius: 4px; transition: all 0.2s; }
.nav-link:hover { color: var(--text-color); background: var(--hover-color); }
.nav-link.active { color: var(--accent-color); background: var(--hover-color); }

/* Main Content */
.app-main { padding: 2rem 0; flex: 1; overflow-y: auto; }

/* ==========================================================================
   Cards
   ========================================================================== */
.card { background: var(--surface-color); border-radius: 8px; border: 1px solid var(--border-color); margin-bottom: 1rem; overflow: hidden; }
.card-header { padding: 1rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
.card-body { padding: 1rem; }

/* ==========================================================================
   Badges
   ========================================================================== */
.badge { display: inline-block; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
.badge-success { background: var(--success-color); color: white; }
.badge-warning { background: var(--warning-color); color: black; }
.badge-error { background: var(--error-color); color: white; }
.badge-running { background: var(--accent-color); color: white; animation: pulse 1.5s infinite; }
.badge-pending { background: var(--text-muted); color: white; }

/* ==========================================================================
   Animations
   ========================================================================== */
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pulse-ring { 0%, 100% { box-shadow: 0 0 0 0 rgba(233, 69, 96, 0.4); } 50% { box-shadow: 0 0 0 8px rgba(233, 69, 96, 0); } }

/* ==========================================================================
   Pipeline List
   ========================================================================== */
.pipeline-row { padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: background 0.2s; }
.pipeline-row:hover { background: var(--hover-color); }
.pipeline-row:last-child { border-bottom: none; }
.pipeline-info { display: flex; align-items: center; gap: 1rem; }
.pipeline-id { font-weight: 600; color: var(--accent-color); }
.pipeline-branch { color: var(--text-muted); }
.pipeline-time { color: var(--text-muted); font-size: 0.875rem; }

/* ==========================================================================
   Empty State & Loading
   ========================================================================== */
.empty-state { text-align: center; padding: 3rem; color: var(--text-muted); }
.empty-state-icon { font-size: 3rem; margin-bottom: 1rem; }
.loading { display: flex; justify-content: center; padding: 2rem; }
.spinner { width: 40px; height: 40px; border: 4px solid var(--border-color); border-top-color: var(--accent-color); border-radius: 50%; animation: spin 1s linear infinite; }

/* ==========================================================================
   Jobs Grid
   ========================================================================== */
.jobs-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 0.5rem; }
.job-card { background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 6px; padding: 0.75rem; cursor: pointer; transition: all 0.2s; }
.job-card:hover { border-color: var(--accent-color); transform: translateY(-2px); }
.job-name { font-weight: 500; margin-bottom: 0.25rem; }
.job-stage { font-size: 0.75rem; color: var(--text-muted); }

/* ==========================================================================
   DAG Visualization
   ========================================================================== */
.dag-container { overflow-x: auto; padding: 1rem 0; position: relative; }
.dag-lines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
.dag-line { stroke: var(--border-color); stroke-width: 2; fill: none; opacity: 0.6; marker-end: url(#arrowhead); }
.dag-line-same-stage { stroke: var(--accent-color); opacity: 0.8; }
.dag-stages { display: flex; gap: 0; min-width: max-content; align-items: flex-start; position: relative; z-index: 2; }
.dag-stage { min-width: 48px; display: flex; flex-direction: column; align-items: center; }
.dag-stage-header { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.5rem; padding: 0.2rem 0.5rem; background: var(--hover-color); border-radius: 10px; text-align: center; white-space: nowrap; display: flex; align-items: center; gap: 0.25rem; cursor: pointer; transition: all 0.2s; }
.dag-stage-header:hover { background: var(--border-color); }
.run-stage-btn { background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 0.7rem; padding: 0; opacity: 0; transition: opacity 0.2s; }
.dag-stage-header:hover .run-stage-btn { opacity: 1; }
.run-stage-btn:hover { color: var(--accent-color); }
.dag-jobs { display: flex; flex-direction: column; gap: 0.5rem; align-items: center; }

/* DAG Job Circles */
.dag-job { width: 32px; height: 32px; border-radius: 50%; cursor: pointer; transition: all 0.2s; position: relative; display: flex; align-items: center; justify-content: center; border: none; background: var(--border-color); color: white; }
.dag-job:hover { transform: scale(1.1); box-shadow: 0 0 12px rgba(233, 69, 96, 0.5); }
.dag-job.selected { box-shadow: 0 0 0 3px var(--accent-color); }
.dag-job.status-success { background: var(--success-color); }
.dag-job.status-failed { background: var(--error-color); }
.dag-job.status-warning { background: var(--warning-color); color: black; }
.dag-job.status-running { background: var(--accent-color); animation: pulse-ring 1.5s infinite; }
.dag-job.status-pending { background: var(--text-muted); }
.dag-job-icon { font-size: 0.85rem; color: inherit; }

/* Manual jobs */
.dag-job.manual { border: 2px solid #f59e0b; box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.2); }
.dag-job.manual.status-pending { cursor: pointer; }
.dag-job.manual.status-pending:hover { border-color: #d97706; box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.4); }
.dag-job.manual::before { content: '\23F8'; position: absolute; top: 1px; right: 1px; font-size: 8px; color: #f59e0b; opacity: 0.8; }
.dag-job.manual:hover::before { opacity: 1; }

/* DAG Tooltips */
.dag-job-tooltip { position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); background: var(--surface-color); border: 1px solid var(--border-color); padding: 0.5rem 0.75rem; border-radius: 6px; white-space: nowrap; font-size: 0.75rem; opacity: 0; visibility: hidden; transition: all 0.2s; z-index: 1000; pointer-events: none; margin-bottom: 8px; color: var(--text-color); }
.dag-job-tooltip::after { content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); border: 6px solid transparent; border-top-color: var(--border-color); }
.dag-job:hover .dag-job-tooltip { opacity: 1; visibility: visible; }
.dag-job-tooltip-name { font-weight: 600; margin-bottom: 0.25rem; color: var(--text-color); }
.dag-job-tooltip-info { color: var(--text-muted); }

/* DAG Legend */
.dag-legend { display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; position: relative; z-index: 1; }
.dag-legend-item { display: flex; align-items: center; gap: 0.25rem; font-size: 0.75rem; color: var(--text-muted); }
.dag-legend-color { width: 16px; height: 16px; border-radius: 50%; border: 2px solid; }

/* ==========================================================================
   Split View (Pipeline Detail)
   ========================================================================== */
.split-view { display: flex; gap: 0; height: calc(100vh - 200px); min-height: 400px; width: 100%; overflow: hidden; }
.split-left { flex: 0 0 450px; overflow: auto; min-width: 200px; max-width: 80%; padding-right: 0.5rem; }
.split-left.full-width { flex: 1; max-width: none; }
.split-divider { flex: 0 0 6px; background: var(--border-color); cursor: col-resize; position: relative; transition: background 0.2s; }
.split-divider:hover, .split-divider.dragging { background: var(--accent-color); }
.split-divider::before { content: ''; position: absolute; left: -4px; right: -4px; top: 0; bottom: 0; }
.split-right { flex: 1; display: flex; flex-direction: column; background: var(--surface-color); border-radius: 0; border: 1px solid var(--border-color); border-left: none; overflow: hidden; min-height: 0; min-width: 200px; }
.split-right-header { padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; background: var(--hover-color); }
.split-right-header h3 { font-size: 0.9rem; font-weight: 600; }
.split-right-body { flex: 1; overflow: hidden; display: flex; flex-direction: column; min-height: 0; }

/* ==========================================================================
   Log Viewer
   ========================================================================== */
.live-log-viewer { flex: 1; background: var(--log-bg); color: var(--log-text); font-family: 'Monaco', 'Menlo', 'Consolas', monospace; font-size: 0.75rem; overflow: auto; padding: 0.5rem; min-height: 0; }
.live-log-line { display: flex; line-height: 1.4; }
.live-log-line-number { color: var(--log-line-number); min-width: 40px; text-align: right; padding-right: 0.75rem; user-select: none; }
.live-log-content { white-space: pre-wrap; word-break: break-all; }
.log-status-bar { padding: 0.5rem 1rem; border-top: 1px solid var(--border-color); font-size: 0.75rem; color: var(--text-muted); display: flex; justify-content: space-between; align-items: center; background: var(--hover-color); }
.auto-scroll-indicator { display: flex; align-items: center; gap: 0.5rem; }
.auto-scroll-indicator.active { color: var(--success-color); }

.log-viewer, .yaml-viewer { background: var(--log-bg); color: var(--log-text); font-family: 'Monaco', 'Menlo', 'Consolas', monospace; font-size: 0.8rem; padding: 1rem; max-height: 600px; overflow: auto; border-radius: 4px; white-space: pre; tab-size: 2; }
.log-line { display: flex; }
.log-line-number { color: var(--log-line-number); width: 50px; text-align: right; padding-right: 1rem; user-select: none; }

/* ==========================================================================
   ANSI Color Classes
   ========================================================================== */
.ansi-black { color: #586e75; }
.ansi-red { color: #dc322f; }
.ansi-green { color: #859900; }
.ansi-yellow { color: #b58900; }
.ansi-blue { color: #268bd2; }
.ansi-magenta { color: #d33682; }
.ansi-cyan { color: #2aa198; }
.ansi-white { color: #eee8d5; }
.ansi-bright-black { color: #657b83; }
.ansi-bright-red { color: #cb4b16; }
.ansi-bright-green { color: #98c379; }
.ansi-bright-yellow { color: #e5c07b; }
.ansi-bright-blue { color: #83a598; }
.ansi-bright-magenta { color: #c678dd; }
.ansi-bright-cyan { color: #56b6c2; }
.ansi-bright-white { color: #fdf6e3; }
.ansi-bg-black { background: #002b36; }
.ansi-bg-red { background: #dc322f; }
.ansi-bg-green { background: #859900; }
.ansi-bg-yellow { background: #b58900; }
.ansi-bg-blue { background: #268bd2; }
.ansi-bg-magenta { background: #d33682; }
.ansi-bg-cyan { background: #2aa198; }
.ansi-bg-white { background: #eee8d5; }
.ansi-bold { font-weight: bold; }
.ansi-dim { opacity: 0.7; }
.ansi-italic { font-style: italic; }
.ansi-underline { text-decoration: underline; }

/* ==========================================================================
   Artifacts
   ========================================================================== */
.artifacts-container { margin-top: 1rem; }
.artifact-list { display: flex; flex-direction: column; gap: 0.25rem; }
.artifact-item { display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 0.75rem; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 4px; transition: all 0.2s; }
.artifact-item:hover { border-color: var(--accent-color); }
.artifact-info { display: flex; align-items: center; gap: 0.5rem; }
.artifact-icon { color: var(--text-muted); }
.artifact-name { font-family: monospace; font-size: 0.85rem; }
.artifact-size { font-size: 0.75rem; color: var(--text-muted); }
.artifact-download { color: var(--accent-color); text-decoration: none; font-size: 0.75rem; padding: 0.25rem 0.5rem; border: 1px solid var(--accent-color); border-radius: 4px; transition: all 0.2s; }
.artifact-download:hover { background: var(--accent-color); color: white; }

/* ==========================================================================
   Tabs
   ========================================================================== */
.tabs { display: flex; gap: 0; margin-bottom: 1rem; border-bottom: 1px solid var(--border-color); }
.tab { padding: 0.5rem 1rem; cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; color: var(--text-muted); }
.tab:hover { color: var(--text-color); }
.tab.active { color: var(--accent-color); border-bottom-color: var(--accent-color); }
.tab-content { display: none; }
.tab-content.active { display: block; }

/* ==========================================================================
   YAML Viewer
   ========================================================================== */
.yaml-line { display: flex; }
.yaml-line-number { color: #484f58; min-width: 40px; text-align: right; padding-right: 1rem; user-select: none; }
.yaml-content { flex: 1; }
.yaml-key { color: #7ee787; }
.yaml-string { color: #a5d6ff; }
.yaml-number { color: #79c0ff; }
.yaml-boolean { color: #ff7b72; }
.yaml-null { color: #ff7b72; font-style: italic; }
.yaml-anchor { color: #d2a8ff; }
.yaml-alias { color: #d2a8ff; }
.yaml-tag { color: #ffa657; }
.yaml-comment { color: #8b949e; font-style: italic; }
.yaml-variable { color: #ffa657; }
.yaml-keyword { color: #ff7b72; font-weight: 500; }
.yaml-list-marker { color: #79c0ff; }

/* ==========================================================================
   Buttons
   ========================================================================== */
.btn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.875rem; font-weight: 500; cursor: pointer; border: none; transition: all 0.2s; }
.btn:disabled { opacity: 0.5; cursor: not-allowed; }
.btn-primary { background: var(--success-color); color: white; }
.btn-primary:hover:not(:disabled) { background: #d13550; }
.btn-secondary { background: var(--border-color); color: var(--text-color); }
.btn-secondary:hover:not(:disabled) { background: var(--hover-color); }
.btn-success { background: var(--success-color); color: white; }
.btn-success:hover:not(:disabled) { background: #43a047; }
.btn-danger { background: var(--error-color); color: white; }
.btn-danger:hover:not(:disabled) { background: #e53935; }
.btn-sm { padding: 0.25rem 0.5rem; font-size: 0.75rem; }

/* Button Groups */
.btn-group { display: inline-flex; border-radius: 6px; overflow: hidden; border: 1px solid var(--border-color); }
.btn-group .btn { border-radius: 0; border: none; padding: 0.375rem 0.75rem; }
.btn-group .btn:not(:last-child) { border-right: 1px solid var(--border-color); }
.btn-group .btn.active { background: var(--accent-color); color: white; }
.btn-group .btn:not(.active) { background: var(--surface-color); color: var(--text-muted); }
.btn-group .btn:not(.active):hover { background: var(--hover-color); color: var(--text-color); }

/* Special Buttons */
.close-btn { background: none; border: none; color: var(--text-muted); cursor: pointer; padding: 0.25rem; font-size: 1.2rem; line-height: 1; }
.close-btn:hover { color: var(--text-color); }
.header-actions { display: flex; gap: 0.5rem; align-items: center; }
.run-job-btn { background: var(--accent-color); border: none; color: black; cursor: pointer; padding: 0.25rem 0.75rem; font-size: 0.75rem; border-radius: 4px; font-weight: 500; transition: all 0.2s; }
.run-job-btn:hover { opacity: 0.9; transform: scale(1.02); }
.run-job-btn:disabled { background: var(--text-muted); cursor: not-allowed; opacity: 0.6; }

/* ==========================================================================
   Utilities
   ========================================================================== */
.back-link { color: var(--accent-color); text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; }
.back-link:hover { text-decoration: underline; }
h2 { margin-bottom: 1rem; }
.flex-between { display: flex; justify-content: space-between; align-items: center; }
.mb-2 { margin-bottom: 0.5rem; }
.text-muted { color: var(--text-muted); }
.cwd-info { font-size: 0.75rem; color: var(--text-muted); margin-top: 0.25rem; }
.action-bar { display: flex; gap: 0.5rem; align-items: center; }

/* ==========================================================================
   Status Indicators
   ========================================================================== */
.status-indicator { display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; }
.status-dot { width: 8px; height: 8px; border-radius: 50%; }
.status-dot.running { background: var(--accent-color); animation: pulse 1.5s infinite; }
.status-dot.idle { background: var(--success-color); }

/* ==========================================================================
   Init Progress
   ========================================================================== */
.init-progress { margin-top: 0.75rem; padding: 0.75rem; background: var(--bg-color); border-radius: 6px; border: 1px solid var(--border-color); }
.init-progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; }
.init-progress-label { font-size: 0.875rem; color: var(--text-color); display: flex; align-items: center; gap: 0.5rem; }
.init-progress-phase { font-size: 0.75rem; color: var(--text-muted); }
.init-progress-bar { height: 4px; background: var(--border-color); border-radius: 2px; overflow: hidden; }
.init-progress-fill { height: 100%; background: var(--accent-color); border-radius: 2px; transition: width 0.3s ease; }
.init-spinner { display: inline-block; width: 12px; height: 12px; border: 2px solid var(--border-color); border-top-color: var(--accent-color); border-radius: 50%; animation: spin 1s linear infinite; }

/* ==========================================================================
   Resource Chart
   ========================================================================== */
.resource-chart-card { margin-bottom: 1rem; }
.resource-chart-container { position: relative; height: 150px; }
.resource-toggle-btn { font-size: 0.7rem; padding: 0.2rem 0.5rem; }
.resource-toggle-btn.active { background: var(--success-color); }
.resource-disabled-msg { text-align: center; padding: 1rem; color: var(--text-muted); font-size: 0.85rem; }

/* ==========================================================================
   Custom Scrollbars
   ========================================================================== */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--bg-color); }
::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
* { scrollbar-width: thin; scrollbar-color: var(--border-color) var(--bg-color); }
