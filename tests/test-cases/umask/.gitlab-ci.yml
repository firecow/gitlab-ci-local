---
build-job:
  tags: [shared-shell-executor]
  script:
    - |
      docker build -q -t debug:ci-${CI_PIPELINE_IID} -f - . <<EOF
      FROM alpine
      USER guest
      EOF

alpine-guest:
  tags: [shared-docker-executor]
  needs: [build-job]
  image: debug:ci-${CI_PIPELINE_IID}
  script:
    - stat -c "%a %n %u %g" one.txt
    - stat -c "%a %n %u %g" script.sh

alpine-root:
  tags: [shared-docker-executor]
  needs: []
  image: alpine
  script:
    - stat -c "%a %n %u %g" one.txt
    - stat -c "%a %n %u %g" script.sh
