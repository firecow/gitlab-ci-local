---
produce-cache:
  stage: build
  image: alpine
  cache:
    key: maven
    paths:
      - .cache
      - /tmp/
  script:
    - rm -rf .cache/file1 || true
    - mkdir -p .cache
    - touch .cache/file1
    - touch /tmp/file2

consume-cache:
  stage: test
  image: alpine
  needs: [produce-cache]
  dependencies: [produce-cache] # testing the absence of artifacts
  cache:
    key: maven
    paths:
      - .cache
      - /tmp/
  script:
    - test -f .cache/file1
    - test -f /tmp/file2
